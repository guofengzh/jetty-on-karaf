Deploy Security Provider

/etc/config.properties:
org.apache.karaf.security.providers = org.bouncycastle.jce.provider.BouncyCastleProvider

org.osgi.framework.bootdelegation = ...,org.bouncycastle*

NPN:
org.osgi.framework.bootdelegation = ...,org.eclipse.jetty.npn

For jetty distribution, to run SPDY:
       java  -Xbootclasspath/p:npn-boot-1.1.5.v20130313.jar -jar start.jar OPTIONS=spdy

Starting in OSGi

To use NPN in an OSGi environment, in addition to putting the NPN jar on the boot classpath for the container, you will also need to deploy the jetty-osgi-npn jar. This jar contains a Fragment-Host directive that ensures the NPN classes will be available from the system bundle.

You can download the jetty-osgi-npn jar from maven central: http://repo1.maven.org/maven2/org/eclipse/jetty/osgi/jetty-osgi-npn/

It's useful to look at the full stack trace. You could also use -Djavax.net.debug=ssl, or at least -Djavax.net.debug=ssl,keymanager, to get more debugging information, if the information in the stack trace isn't sufficient.

etc:
   Using the xml configuration files in jetty-osgi/jetty-osgi-boot/jettyhome. In jetty 9 final, it simplfy the configuration of web app in OSGi enviroment.(no need to configure OSGi-specific deployer or web provider explicity.

